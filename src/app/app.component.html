<div class="weather-app">
  <div class="header">
    <h1 class="app-title">
      <span class="material-icons">wb_sunny</span>
      Hava Durumu
    </h1>
    <div class="header-actions">
      <button 
        class="favorite-btn" 
        (click)="toggleFavorite()" 
        [class.active]="isFavorite()"
        *ngIf="weatherData"
        [title]="isFavorite() ? 'Favorilerden çıkar' : 'Favorilere ekle'"
      >
        <span class="material-icons">
          {{ isFavorite() ? 'favorite' : 'favorite_border' }}
        </span>
      </button>
      <button class="refresh-btn" (click)="refreshWeather()" [disabled]="loading">
        <span class="material-icons" [class.spinning]="loading">refresh</span>
      </button>
    </div>
  </div>

  <!-- Arama kontrolleri header'ın hemen altında -->
  <div class="search-controls">
    <div class="search-row">
      <app-city-search (citySelected)="onCitySelected($event)"></app-city-search>
      <app-location-button 
        (locationFound)="onLocationFound($event)"
        (locationError)="onLocationError($event)">
      </app-location-button>
      <app-favorites (citySelected)="onCitySelected($event)"></app-favorites>
    </div>
  </div>



  <div class="error-alert" *ngIf="errorMessage">
    <span class="material-icons">warning</span>
    <span>{{ errorMessage }}</span>
  </div>

  <div class="loading-spinner" *ngIf="loading">
    <div class="spinner"></div>
    <p>Hava durumu bilgileri yükleniyor...</p>
  </div>

  <div class="weather-content" *ngIf="!loading && weatherData">
    <app-weather-card [weatherData]="weatherData"></app-weather-card>
    <app-forecast [forecast]="weatherData.forecast"></app-forecast>
  </div>

  <div class="error-message" *ngIf="!loading && !weatherData">
    <span class="material-icons">error_outline</span>
    <p>Hava durumu bilgileri yüklenemedi. Lütfen tekrar deneyin.</p>
  </div>
</div>
